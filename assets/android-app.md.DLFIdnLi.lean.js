import{d as A,x as s,p as w,c as o,o as l,j as t,a9 as y,a as r,t as n,_ as N}from"./chunks/framework.DHtr43LW.js";const T={class:"app-panel"},x={key:0,class:"status"},S={key:1,class:"status error"},D={key:2,class:"version-block"},E=["href"],I={key:0,class:"compare"},V={key:1,class:"compare ok"},C={key:2,class:"compare warn"},H=JSON.parse('{"title":"安卓 APP","description":"","frontmatter":{"layout":"doc","title":"安卓 APP"},"headers":[],"relativePath":"android-app.md","filePath":"android-app.md","lastUpdated":1766419205000}'),K={name:"android-app.md"},U=A({...K,setup(X){const _="https://api.github.com/repos/NatsumiXD/novel-comment/commits?sha=apk",v=s(""),f=s(""),d=s("loading"),h=s(""),p=s(null),c=s(""),i=s(""),g=e=>e.replace(/^Add new build:\s*/i,"").trim(),k=e=>{const a=e.match(/NatNovel-(\d{8}_\d{6})/);return a?a[1]:null},b=async()=>{d.value="loading";try{const e=await fetch(_,{headers:{Accept:"application/vnd.github+json"}});if(!e.ok)throw new Error(`HTTP ${e.status}`);const a=await e.json();if(!Array.isArray(a)||a.length===0)throw new Error("API 返回为空");const P=a[0]?.commit?.message||"",u=g(P);if(!u)throw new Error("无法从 commit.message 解析文件名");v.value=u,f.value=`https://hk.gh-proxy.org/https://github.com/NatsumiXD/novel-comment/raw/refs/heads/apk/${u}`;const m=k(u);i.value="20251223_015307",c.value=m??"",m&&i.value?p.value=i.value<m:p.value=null,d.value="ready"}catch(e){d.value="error",h.value=e instanceof Error?e.message:String(e)}};return w(b),(e,a)=>(l(),o("div",null,[a[5]||(a[5]=t("h1",{id:"安卓-app-下载",tabindex:"-1"},[r("安卓 APP 下载 "),t("a",{class:"header-anchor",href:"#安卓-app-下载","aria-label":"Permalink to “安卓 APP 下载”"},"​")],-1)),a[6]||(a[6]=t("p",null,"为什么使用APP？",-1)),a[7]||(a[7]=t("p",null,"可以离线观看...?",-1)),a[8]||(a[8]=t("p",null,"使用 GitHub Actions 自动产出的 APK，以下按钮始终指向最新构建。",-1)),t("div",T,[d.value==="loading"?(l(),o("p",x,"正在从 GitHub 获取最新版本…")):d.value==="error"?(l(),o("p",S,"获取失败："+n(h.value)+"，可手动按下方规则拼接下载地址。",1)):(l(),o("div",D,[t("p",null,[a[0]||(a[0]=r("最新版本文件：",-1)),t("strong",null,n(v.value),1)]),t("a",{class:"download",href:f.value,target:"_blank",rel:"noopener"},"立即下载 APK",8,E),p.value===!0?(l(),o("p",I,[a[1]||(a[1]=r("检测到新版本，",-1)),a[2]||(a[2]=t("br",null,null,-1)),r("请更新（APK 时间："+n(c.value)+"，构建时间："+n(i.value)+"）。",1)])):p.value===!1?(l(),o("p",V,[a[3]||(a[3]=r("当前为最新版本",-1)),a[4]||(a[4]=t("br",null,null,-1)),r("（APK 时间："+n(c.value)+"，构建时间："+n(i.value)+"）。",1)])):(l(),o("p",C,"无法识别文件时间或构建时间缺失。"))])),t("button",{class:"refresh",onClick:b},"刷新")]),a[9]||(a[9]=y("",2))]))}}),F=N(U,[["__scopeId","data-v-e4f4db0a"]]);export{H as __pageData,F as default};
