import{d as _,x as s,p as f,c as d,o as r,j as e,an as g,a as m,t as b,_ as P}from"./chunks/framework.v-3SKfDB.js";const k={class:"app-panel"},A={key:0,class:"status"},w={key:1,class:"status error"},y={key:2,class:"version-block"},N=["href"],I=JSON.parse('{"title":"安卓 APP","description":"","frontmatter":{"layout":"doc","title":"安卓 APP"},"headers":[],"relativePath":"android-app.md","filePath":"android-app.md","lastUpdated":1766335940000}'),x={name:"android-app.md"},T=_({...x,setup(D){const h="https://api.github.com/repos/NatsumiXD/novel-comment/commits?sha=apk",i=s(""),l=s(""),o=s("loading"),c=s(""),u=t=>t.replace(/^Add new build:\s*/i,"").trim(),p=async()=>{o.value="loading";try{const t=await fetch(h,{headers:{Accept:"application/vnd.github+json"}});if(!t.ok)throw new Error(`HTTP ${t.status}`);const a=await t.json();if(!Array.isArray(a)||a.length===0)throw new Error("API 返回为空");const v=a[0]?.commit?.message||"",n=u(v);if(!n)throw new Error("无法从 commit.message 解析文件名");i.value=n,l.value=`https://hk.gh-proxy.org/https://github.com/NatsumiXD/novel-comment/raw/refs/heads/apk/${n}`,o.value="ready"}catch(t){o.value="error",c.value=t instanceof Error?t.message:String(t)}};return f(p),(t,a)=>(r(),d("div",null,[a[1]||(a[1]=e("h1",{id:"安卓-app-下载",tabindex:"-1"},[m("安卓 APP 下载 "),e("a",{class:"header-anchor",href:"#安卓-app-下载","aria-label":"Permalink to “安卓 APP 下载”"},"​")],-1)),a[2]||(a[2]=e("p",null,"使用 GitHub Actions 自动产出的 APK，以下按钮始终指向最新构建。",-1)),e("div",k,[o.value==="loading"?(r(),d("p",A,"正在从 GitHub 获取最新版本…")):o.value==="error"?(r(),d("p",w,"获取失败："+b(c.value)+"，可手动按下方规则拼接下载地址。",1)):(r(),d("div",y,[e("p",null,[a[0]||(a[0]=m("最新版本文件：",-1)),e("strong",null,b(i.value),1)]),e("a",{class:"download",href:l.value,target:"_blank",rel:"noopener"},"立即下载 APK",8,N)])),e("button",{class:"refresh",onClick:p},"刷新")]),a[3]||(a[3]=g("",2))]))}}),V=P(T,[["__scopeId","data-v-b07db5d4"]]);export{I as __pageData,V as default};
